
function sneeit_included_cookie(){if("cookie" in document){return true}return false}function sneeit_set_cookie(a,d,b){if(!sneeit_included_cookie()){return false}var e=new Date();e.setDate(e.getDate()+b);var c=escape(d)+((b==null)?"":"; expires="+e.toUTCString())+"; path=/";document.cookie=a+"="+c;if(sneeit_get_cookie(a)!==d){return false}return true}function sneeit_has_cookie(){if(sneeit_set_cookie("test","ok")){return true}return false}function sneeit_get_cookie(b){if(!sneeit_included_cookie()){return""}var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++){a=d[c].substr(0,d[c].indexOf("="));e=d[c].substr(d[c].indexOf("=")+1);a=a.replace(/^\s+|\s+$/g,"");if(a==b){return unescape(e)}}return""}function sneeit_has_storage(){if(typeof(localStorage)!=="undefined"){return true}return false}function sneeit_set_storage(a,b){if(sneeit_has_storage()){localStorage.setItem(a,b);return true}return false}function sneeit_get_storage(b){if(sneeit_has_storage()){var a=localStorage.getItem(b);if(a){return a}}return""}function sneeit_update_option(b,a){if(sneeit_has_storage()){return sneeit_set_storage(b,a)}else{if(sneeit_has_cookie()){return sneeit_set_cookie(b,a)}}return false}function sneeit_get_option(a){if(sneeit_has_storage()){return sneeit_get_storage(a)}else{if(sneeit_has_cookie()){return sneeit_get_cookie(a)}}return""}(function(b){b("."+Sneeit_Rating.id+"-star-bar-top, ."+Sneeit_Rating.id+"-line-bar-top").each(function(){var c=b(this).attr("data-value");if(typeof(c)!="undefined"&&!isNaN(c)){b(this).css("width",c+"%")}});function a(f,c,g){if(isNaN(c)){return}c=Number(c);if(c>75){if(f.find(".sneeit-percent-mask").length==0){b('<span class="sneeit-percent-mask"></span>').insertBefore(f.find(".sneeit-percent-text"))}}else{f.find(".sneeit-percent-mask").remove()}var d=c-(c%25)+25;f.find(".sneeit-percent-fill").replaceWith('<span class="sneeit-percent-fill sneeit-percent-fill-'+d+'"></span>');f.find(".sneeit-percent-modifier").replaceWith('<span class="sneeit-percent-modifier" style="transform: rotate('+(c*3.6+45)+'deg);"></span>');f.find(".sneeit-percent-text").html(g)}b("."+Sneeit_Rating.id+"-item-user").each(function(){var f=Number(b(this).attr("data-id"));var d=b(this).attr("data-type");var i=Number(b(this).attr("data-value"));var c=sneeit_get_option(Sneeit_Rating.id+"-"+d+"-"+f);var k=null;var j=b(this).find("."+Sneeit_Rating.id+"-item-name");var h=b("."+Sneeit_Rating.id+"-item-user-note");var g=b(this).find("."+Sneeit_Rating.id+"-star-bar");var e=b(this).find("."+Sneeit_Rating.id+"-star-bar-top");if("star"!=d){g=b(this).find("."+Sneeit_Rating.id+"-line-bar");e=b(this).find("."+Sneeit_Rating.id+"-line-bar-top")}if(!g.length||!e.length||!j.length||!h.length){return}g.attr("data-value",i);g.each(function(){if(c){b(this).addClass("disabled");h.html(Sneeit_Rating.text.rated.replace("%s",c));return}else{if(!sneeit_has_storage()){b(this).addClass("disabled");h.html(Sneeit_Rating.text.browser_not_support);return}}if("star"==d){h.html(Sneeit_Rating.text.click_star_rate)}else{h.html(Sneeit_Rating.text.click_line_rate)}}).mousemove(function(n){if(b(this).is(".disabled")){return}b(this).addClass("mousemove");b(this).removeClass("mouseout");if(k!="null"&&typeof(k)!="undefined"){clearTimeout(k);k=null}var m=b(this).width();var l=n.pageX;e.each(function(){var p=b(this).offset().left;var o=l-p;if(o<0){o=0}var q=Math.floor(o*100/m);if(q>100){q=100}if("star"==d){q=Math.round(q*5/100);o=Math.round(q*m/5)}else{if("point"==d){q=Math.round(q*10/100);o=Math.round(q*m/10)}}b(this).css("width",o+"px").attr("data-target_value",q);h.html(Sneeit_Rating.text.will_rate.replace("%s",q))})}).mouseout(function(){if(b(this).is(".disabled")){return}b(this).removeClass("mousemove");if(b(this).is(".mouseout")){return}b(this).addClass("mouseout");var l=b(this);k=setTimeout(function(){b(this).removeClass("mouseout");if(b(l).is(".mousemove")||b(l).is(".disabled")){if(k!="null"&&typeof(k)!="undefined"){clearTimeout(k);k=null}return}var m=b(l).attr("data-value");if(typeof(m)=="undefined"||isNaN(m)){return}e.css("width",m+"%");if("star"==d){h.html(Sneeit_Rating.text.click_star_rate)}else{h.html(Sneeit_Rating.text.click_line_rate)}},1000)}).click(function(){if(b(this).is(".disabled")){return}b(this).addClass("disabled");var l=e.attr("data-target_value");if(typeof(l)=="undefined"){return}h.html(Sneeit_Rating.text.submitting);b.post(Sneeit_Rating.ajax_url,{action:"sneeit_post_review_user_rating",id:f,value:l,}).done(function(o){if(!o||o=="0"||o=="-1"||o.indexOf("**********")==-1){h.html(Sneeit_Rating.text.server_not_accept);return}h.html(Sneeit_Rating.text.rated.replace("%s",l));sneeit_update_option(Sneeit_Rating.id+"-"+d+"-"+f,l);o=o.split("**********");j.html("<strong>"+o[0]+"</strong>");var n=Number(o[1]);n=n.toFixed(1);if("star"==d){var m=Math.round(n*100/5);b("."+Sneeit_Rating.id+"-average-value-text").html(n);b("."+Sneeit_Rating.id+"-average-value ."+Sneeit_Rating.id+"-star-bar-top").css("width",m+"%")}else{var m=Math.round(n*100/10);b("."+Sneeit_Rating.id+"-average-value-text").find(".sneeit-percent").each(function(){a(b(this),m,n)})}}).fail(function(){h.html(Sneeit_Rating.text.server_not_response)})})})})(jQuery);